---
- name: Verify Calico CNI configuration
  hosts: all
  tasks:
    - name: Check Calico manifest applied
      ansible.builtin.command: kubectl get pods -n kube-system | grep calico
      register: cni_calico_manifest
      changed_when: false

    - name: Assert Calico pods are running
      ansible.builtin.assert:
        that:
          - "'calico' in cni_calico_manifest.stdout"

